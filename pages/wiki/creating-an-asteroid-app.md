---
title: Creating an Asteroid app
layout: documentation
---

The app creation process of AsteroidOS needs a Software Development Kit generated by OpenEmbedded. You can either grab a prebuilt SDK for the nightlies [here](https://release.asteroidos.org/nightlies/sdk/oecore-x86_64-armv7vet2hf-neon-toolchain-nodistro.0.sh) and install it on your system or you can build it yourself as follows:

# Building the Cross Compilation Toolchain

---

If you’ve already got an OpenEmbedded build directory via the [Building AsteroidOS]({{rel 'wiki/building-asteroidos'}}) page, cd to that directory. Else, create one with:

```
git clone https://github.com/AsteroidOS/asteroid
cd asteroid/
```

Then, build the cross compilation toolchain with:

```
source ./prepare-build.sh dory
bitbake meta-toolchain-qt5
```

# Install the SDK

---

If you downloaded a prebuilt SDK, run the downloaded script. If you followed the previous steps, this will have generated the same installation script in _tmp-glibc/deploy/sdk/_, you can run it as follows:

```
./tmp-glibc/deploy/sdk/oecore-x86_64-armv7vet2hf-neon-toolchain-nodistro.0.sh
```

This script will install the cross-compiler and ARM libraries in _/usr/local/oecore-x86_64_ by default, along with a script that needs to be sourced before every build. If you want to build a simple project via the terminal, this can be done like that:

```
source /usr/local/oecore-x86_64/environment-setup-armv7vet2hf-neon-oe-linux-gnueabi
qmake
make
```


# Configure QtCreator for cross compilation

---

Before running QtCreator you must run the previously mentioned script:

```
source /usr/local/oecore-x86_64/environment-setup-armv7vet2hf-neon-oe-linux-gnueabi
qtcreator
```

This can be done automatically by prepending "source /usr/local/oecore-x86_64/environment-setup-armv7vet2hf-neon-oe-linux-gnueabi" before #!/bin/sh in _/usr/bin/qtcreator.sh_

Now that you are in QtCreator go to ‘_Tools &#8594; Options &#8594; Devices_‘

- Add a new Generic Linux Device.
- Name it "AsteroidOS Watch".
- Choose 192.168.2.15 as IP address.
- Use ceres as user.
- Choose Password authentication and leave the password field empty.


Under the '_Kits_'

- In the Compilers tab add the following GCC (C++): _/usr/local/oecore-x86_64/sysroots/x86_64-oesdk-linux/usr/bin/arm-oe-linux-gnueabi/arm-oe-linux-gnueabi-g++_ and GCC (C): _/usr/local/oecore-x86_64/sysroots/x86_64-oesdk-linux/usr/bin/arm-oe-linux-gnueabi/arm-oe-linux-gnueabi-gcc_
- In the Debuggers tab add the following gdb: _/usr/local/oecore-x86_64/sysroots/x86_64-oesdk-linux/usr/bin/arm-oe-linux-gnueabi/arm-oe-linux-gnueabi-gdb_
- In the Qt Versions tab add the following qmake: _/usr/local/oecore-x86_64/sysroots/x86_64-oesdk-linux/usr/bin/qmake_
- In the Kits tab add a kit with the name "AsteroidOS Kit" with the previously defined device, Qt5 version and compilers, set the sysroot to _/usr/local/oecore-x86_64/sysroots/armv7vet2hf-neon-oe-linux-gnueabi/_ and let the other variables empty.

# First app

---

[Asteroid-HelloWorld](https://github.com/AsteroidOS/asteroid-helloworld) can act as a cool QML demo app to make your first steps into AsteroidOS development easier. You can clone it, build it, install it and then modify it to follow your needs:

```
mkdir ~/asteroid-development
cd ~/asteroid-development
git clone https://github.com/AsteroidOS/asteroid-helloworld
cd asteroid-helloworld/
source /usr/local/oecore-x86_64/environment-setup-armv7vet2hf-neon-oe-linux-gnueabi
qtcreator asteroid-helloworld.pro
```

Usually QtCreator starts (with unconfigured projects) with Projects highlighted in the left sidebar. You are forced to select your Kit your configured. Select ONLY your AsteroidOS Kit. Then hit Configure Project. 
Try to build the app (without deployment - the deployment will fail at this state)

Open a new terminal.

```
cd ~/asteroid-development
ls
```

If you hit build lately, you should see a directory listed by `ls` like:

```
build-asteroid-helloworld-AsteroidOS_Kit-Debug
```

In this directory binarys are built.

Go back to QTCreator. Go under Projects in the left sidebar. 
Projects &#8594; Build & Run &#8594; AsteroidOS Kit &#8594; Run

Configure parameters:

- Files to deploy
  - Checkmark Override deployment data from build system
    - Click Add
    - Local File Path: ~/asteroid-development/build-asteroid-helloworld-AsteroidOS_Kit-Debug/asteroid-helloworld
    - Remote directory /home/ceres/apps/

  - Run
    - Alternate executeable on device:
       - Check Use this command instead
       - Enter: /home/ceres/apps/asteroid-helloworld
    - Working directory
       - /home/ceres/apps

  - Environment
    - Click details
    - Add the following environment variables
       - EGL_PLATFORM = wayland
       - QT_QPA_PLATFORM = wayland
       - QT_WAYLAND_DISABLE_WINDOWDECORATION = 1


Now just hit build and then start in the left sidebars bottom. Enjoy your hello world application!

Note: When you restart your application, it will be stopped and restarted with the new binarys automagically.

# Tips and tricks

---

If you want to start your app from the command line, open a shell with [SSH]({{rel 'wiki/ssh'}}), connect to ceres and use invoker:

```
invoker --type=qtcomponents-qt5 /usr/bin/asteroid-stopwatch
```
**TODO:** Document the integration of this invoker command as a run step in the Qt Creator configuration.

If you want to disable screen locking for easier development you can enable the demo mode of mce as root with:

```
mcetool -D on
```
