<!-- Core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="{{ assets }}/js/jquery-1.10.2.min.js"></script>
<script src="{{ assets }}/js/bootstrap.min.js"></script>
<script src="{{ assets }}/js/holder.min.js"></script>
<script src="{{ assets }}/js/application.js"></script>
<script src="{{ assets }}/js/slideshow-stepper.js"></script>
<script src="https://unpkg.com/webp-hero@0.0.2/dist-cjs/polyfills.js"></script>
<script src="https://unpkg.com/webp-hero@0.0.2/dist-cjs/webp-hero.bundle.js"></script>

<!-- Show webp images in older browsers -->
<script>
	var webpMachine = new webpHero.WebpMachine()
	webpMachine.polyfillDocument()
</script>

<!-- Radio button logic for the install pages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
  function updateDownloadLinks() {
    const ReleaseSelect = $('input[name=ReleaseSelector]:checked').val();
    const releasePath = (ReleaseSelect === "2.0") ? "2.0" : "nightlies";

    $(".download-link").each(function() {
      let currentHref = $(this).attr("href");
      if (currentHref) {
        let newHref = currentHref.replace(/\/nightlies\/|\/2\.0\//, `/${releasePath}/`);
        $(this).attr("href", newHref);
      }
    });
  }

  updateDownloadLinks();

  $('input').change(() => {
    const OSSelect = $('input[name=OSSelector]:checked').val();
    const MethSelect = $('input[name=MethSelector]:checked').val();
    const BaseSelect = $('input[name=BaseSelector]:checked').val();
    $("div[name=LinAdb]").toggle(OSSelect === "Lin");
    $("div[name=WinAdb]").toggle(OSSelect === "Win");
    $("div[name=LinProblem]").toggle(OSSelect === "Lin");
    $("div[name=WinProblem]").toggle(OSSelect === "Win");
    $("div[name=LinTemp]").toggle(OSSelect === "Lin" && MethSelect === "Temp");
    $("div[name=LinReal]").toggle(OSSelect === "Lin" && MethSelect === "Real");
    $("div[name=WinTemp]").toggle(OSSelect === "Win" && MethSelect === "Temp");
    $("div[name=WinReal]").toggle(OSSelect === "Win" && MethSelect === "Real");
    $("div[name=WearosAdb]").toggle(BaseSelect === "WearOs");
    $("div[name=AosAdb]").toggle(BaseSelect === "Reflash");
    $("div[name=LinuxSsh]").toggle(OSSelect === "Lin" && BaseSelect === "Reflash");

    updateDownloadLinks();
  });
</script>

<!-- Copy to clipboard button logic -->
<script>
$(document).ready(function() {
  $(".clipboard-button").click(function() {
    var codeContent = $(this).closest(".install-code-wrapper").find("code").text();
    copyToClipboard(codeContent);
  });
});

function copyToClipboard(text) {
  var temp = $("<input>");
  $("body").append(temp);
  temp.val(text).select();
  document.execCommand("copy");
  temp.remove();
  $(document).click(function(event) {
    if (event.target.value == "⧉") { event.target.value = "✔"; }
    setTimeout( function() {
      if (event.target.value == "✔") { event.target.value = "⧉"; }
    }, 1000);
  });
}
</script>
